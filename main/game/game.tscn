[gd_scene load_steps=20 format=3 uid="uid://ukbdxptj5okt"]

[ext_resource type="Script" uid="uid://ba1ew1pw3sudy" path="res://materials/scripts/boxes/3d/custom_detection_box.gd" id="1_en41u"]
[ext_resource type="Script" uid="uid://p0unqgsqck4h" path="res://materials/scripts/multichecker/item.gd" id="2_3ni26"]
[ext_resource type="Script" uid="uid://dq7yfu2kd83wh" path="res://materials/scripts/dynamic_expression/dynamic_expression.gd" id="3_gpuo4"]
[ext_resource type="Script" uid="uid://ciaekacdop5h2" path="res://materials/scripts/multicheckerV2/multicheckerV2.gd" id="3_u7x3r"]
[ext_resource type="Script" uid="uid://csjccrhj5wnx7" path="res://addons/phantom_camera/scripts/phantom_camera/phantom_camera_3d.gd" id="5_u7x3r"]
[ext_resource type="Script" uid="uid://8umksf8e80fw" path="res://addons/phantom_camera/scripts/resources/tween_resource.gd" id="6_6lqia"]
[ext_resource type="Texture2D" uid="uid://dpdcs7q50lpww" path="res://icon.svg" id="6_u71ym"]
[ext_resource type="Script" uid="uid://b8hhnqsugykly" path="res://addons/phantom_camera/scripts/resources/camera_3d_resource.gd" id="7_u71ym"]
[ext_resource type="Script" uid="uid://bd046eokvcnu2" path="res://addons/phantom_camera/scripts/phantom_camera_host/phantom_camera_host.gd" id="8_yo04u"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_6lqia"]

[sub_resource type="Sky" id="Sky_u71ym"]
sky_material = SubResource("ProceduralSkyMaterial_6lqia")
process_mode = 1

[sub_resource type="Environment" id="Environment_yo04u"]
background_mode = 2
sky = SubResource("Sky_u71ym")

[sub_resource type="Resource" id="Resource_6lqia"]
script = ExtResource("3_gpuo4")
expression = "m.enabled=true"
data = Dictionary[String, Variant]({
"m": NodePath("MulticheckerV2")
})
metadata/_custom_type_script = "uid://dq7yfu2kd83wh"

[sub_resource type="Resource" id="Resource_u71ym"]
script = ExtResource("3_gpuo4")
expression = "m.enabled=false"
data = Dictionary[String, Variant]({
"m": NodePath("MulticheckerV2")
})
metadata/_custom_type_script = "uid://dq7yfu2kd83wh"

[sub_resource type="SphereShape3D" id="SphereShape3D_yo04u"]

[sub_resource type="Resource" id="Resource_en41u"]
script = ExtResource("2_3ni26")
metadata/_custom_type_script = "uid://p0unqgsqck4h"

[sub_resource type="SphereShape3D" id="SphereShape3D_36fbw"]
radius = 0.1

[sub_resource type="Resource" id="Resource_2wwl3"]
script = ExtResource("6_6lqia")

[sub_resource type="Resource" id="Resource_q786k"]
script = ExtResource("7_u71ym")
metadata/_custom_type_script = "uid://b8hhnqsugykly"

[node name="game" type="Node"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_yo04u")

[node name="world" type="Node3D" parent="."]

[node name="lvls" type="Node3D" parent="world"]
unique_name_in_owner = true

[node name="test_lvl1" type="Node3D" parent="world/lvls"]

[node name="CSGCombiner3D" type="CSGCombiner3D" parent="world/lvls/test_lvl1"]
use_collision = true

[node name="CSGBox3D" type="CSGBox3D" parent="world/lvls/test_lvl1/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.2529297, 0)
size = Vector3(10, 0.5, 10)

[node name="CSGBox3D2" type="CSGBox3D" parent="world/lvls/test_lvl1/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 0.9481075, -0.31795007, 0, 0.31795007, 0.9481075, 2.498, 0.444, -0.034)
size = Vector3(5, 0.5, 4.5)

[node name="CSGBox3D3" type="CSGBox3D" parent="world/lvls/test_lvl1/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.4993837, 1.146, -3.518)
size = Vector3(5.000244, 0.5, 2.8632813)

[node name="CustomDetectionBox3D" type="Area3D" parent="world/lvls/test_lvl1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.3035944, 0.49625564, 0)
script = ExtResource("1_en41u")
body_entered_callbacks = Array[ExtResource("3_gpuo4")]([SubResource("Resource_6lqia")])
body_exited_callbacks = Array[ExtResource("3_gpuo4")]([SubResource("Resource_u71ym")])
metadata/_custom_type_script = "uid://ba1ew1pw3sudy"

[node name="CollisionShape3D" type="CollisionShape3D" parent="world/lvls/test_lvl1/CustomDetectionBox3D"]
shape = SubResource("SphereShape3D_yo04u")

[node name="MulticheckerV2" type="Node" parent="world/lvls/test_lvl1/CustomDetectionBox3D"]
script = ExtResource("3_u7x3r")
enabled = false
time_stop = false
items = Array[ExtResource("2_3ni26")]([SubResource("Resource_en41u")])
metadata/_custom_type_script = "uid://ciaekacdop5h2"

[node name="pupet" type="CharacterBody3D" parent="world"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.0271327, 0.5234873, 0.08731747)
floor_constant_speed = true

[node name="c" type="CollisionShape3D" parent="world/pupet"]
shape = SubResource("SphereShape3D_36fbw")

[node name="base" type="Marker3D" parent="world/pupet"]

[node name="sp" type="Sprite3D" parent="world/pupet"]
pixel_size = 0.0015
billboard = 1
texture = ExtResource("6_u71ym")

[node name="PhantomCamera3D" type="Node3D" parent="." node_paths=PackedStringArray("follow_target")]
transform = Transform3D(1, 0, 0, 0, 0.2588188, 0.96592486, 0, -0.96592486, 0.2588188, -1.0271327, 5.523487, 1.3373175)
top_level = true
script = ExtResource("5_u7x3r")
priority = 5
follow_mode = 2
follow_target = NodePath("../world/pupet/base")
tween_resource = SubResource("Resource_2wwl3")
camera_3d_resource = SubResource("Resource_q786k")
follow_offset = Vector3(0, 5, 1.25)
metadata/_custom_type_script = "uid://csjccrhj5wnx7"

[node name="Camera2D" type="Camera3D" parent="."]
physics_interpolation_mode = 1
transform = Transform3D(1, 0, 0, 0, 0.2588188, 0.96592486, 0, -0.96592486, 0.2588188, -1.0271327, 5.523487, 1.3373175)

[node name="PhantomCameraHost" type="Node" parent="Camera2D"]
process_priority = 300
process_physics_priority = 300
script = ExtResource("8_yo04u")
metadata/_custom_type_script = "uid://bd046eokvcnu2"

[node name="ui" type="CanvasLayer" parent="."]
